<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather Forecast - Real-time Updates</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes fade-in {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes slide-up {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        @keyframes bounce-slow {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 20px rgba(255, 255, 255, 0.3); }
            50% { box-shadow: 0 0 40px rgba(255, 255, 255, 0.6); }
        }
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-15px); }
        }
        .animate-fade-in { animation: fade-in 0.6s ease-out; }
        .animate-slide-up { animation: slide-up 0.8s ease-out; }
        .animate-shake { animation: shake 0.5s ease-out; }
        .animate-bounce-slow { animation: bounce-slow 3s ease-in-out infinite; }
        .animate-pulse-glow { animation: pulse-glow 2s ease-in-out infinite; }
        .animate-float { animation: float 3s ease-in-out infinite; }
        .bg-transition { transition: all 1s ease-in-out; }
        .hidden { display: none; }
        .forecast-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .forecast-card:hover {
            transform: translateY(-5px) scale(1.05);
        }
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-400 via-blue-500 to-blue-600 bg-transition min-h-screen" id="mainBody">
    <div class="min-h-screen flex flex-col items-center justify-center p-2 sm:p-4 relative">
        <!-- Animated background particles -->
        <div class="absolute inset-0 overflow-hidden pointer-events-none" id="particles"></div>

        <div class="w-full max-w-6xl relative z-10">
            <!-- Header -->
            <div class="text-center mb-4 sm:mb-8 animate-fade-in">
                <h1 class="text-3xl sm:text-5xl md:text-6xl font-bold text-white mb-2 drop-shadow-2xl animate-float">
                    üå¶Ô∏è Weather Forecast
                </h1>
                <p class="text-white text-sm sm:text-lg opacity-90">Real-time weather & 5-day forecast worldwide</p>
            </div>

            <!-- Search Container -->
            <div class="glass-effect rounded-3xl p-3 sm:p-6 mb-4 sm:mb-6 animate-slide-up shadow-2xl">
                <!-- Current Location Button -->
                <div class="mb-3 sm:mb-4 text-center">
                    <button
                        id="currentLocationBtn"
                        class="glass-effect hover:bg-white/30 px-4 sm:px-6 py-2 sm:py-3 rounded-2xl text-white font-medium transition-all inline-flex items-center gap-2 animate-pulse-glow text-sm sm:text-base"
                    >
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="10"></circle>
                            <circle cx="12" cy="12" r="3"></circle>
                            <line x1="12" y1="1" x2="12" y2="3"></line>
                            <line x1="12" y1="21" x2="12" y2="23"></line>
                        </svg>
                        Use Current Location
                    </button>
                </div>

                <!-- Search Bar -->
                <div class="relative">
                    <input
                        type="text"
                        id="cityInput"
                        placeholder="Search for any city worldwide..."
                        class="w-full px-4 sm:px-6 py-3 sm:py-4 pr-14 rounded-2xl glass-effect text-white placeholder-white/70 text-sm sm:text-lg focus:outline-none focus:ring-2 focus:ring-white/50 transition-all"
                    />
                    <button
                        id="searchBtn"
                        class="absolute right-2 top-1/2 -translate-y-1/2 p-2 sm:p-3 glass-effect hover:bg-white/30 rounded-xl transition-all"
                    >
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white">
                            <circle cx="11" cy="11" r="8"></circle>
                            <path d="m21 21-4.3-4.3"></path>
                        </svg>
                    </button>
                </div>

                <!-- Quick City Suggestions -->
                <div class="flex flex-wrap gap-2 mt-3 sm:mt-4 justify-center" id="citySuggestions">
                    <button class="city-suggestion glass-effect hover:bg-white/30 px-3 sm:px-4 py-1 sm:py-2 rounded-full text-white text-xs sm:text-sm transition-all" data-city="London">London</button>
                    <button class="city-suggestion glass-effect hover:bg-white/30 px-3 sm:px-4 py-1 sm:py-2 rounded-full text-white text-xs sm:text-sm transition-all" data-city="New York">New York</button>
                    <button class="city-suggestion glass-effect hover:bg-white/30 px-3 sm:px-4 py-1 sm:py-2 rounded-full text-white text-xs sm:text-sm transition-all" data-city="Tokyo">Tokyo</button>
                    <button class="city-suggestion glass-effect hover:bg-white/30 px-3 sm:px-4 py-1 sm:py-2 rounded-full text-white text-xs sm:text-sm transition-all" data-city="Paris">Paris</button>
                    <button class="city-suggestion glass-effect hover:bg-white/30 px-3 sm:px-4 py-1 sm:py-2 rounded-full text-white text-xs sm:text-sm transition-all" data-city="Dubai">Dubai</button>
                </div>
            </div>

            <!-- Loading Animation -->
            <div id="loading" class="flex justify-center items-center py-10 sm:py-20 animate-fade-in hidden">
                <div class="relative">
                    <div class="w-16 sm:w-20 h-16 sm:h-20 border-4 border-white/30 border-t-white rounded-full" style="animation: spin 1s linear infinite;"></div>
                    <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white animate-pulse">
                            <path d="M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z"></path>
                        </svg>
                    </div>
                </div>
            </div>

            <!-- Error Message -->
            <div id="error" class="glass-effect bg-red-500/30 border-red-300/50 rounded-2xl p-3 sm:p-6 text-white text-center animate-shake hidden">
                <p class="text-sm sm:text-lg font-medium" id="errorMsg"></p>
            </div>

            <!-- Weather Display -->
            <div id="weatherDisplay" class="hidden">
                <!-- Current Weather -->
                <div class="glass-effect rounded-3xl p-4 sm:p-8 mb-4 sm:mb-6 shadow-2xl animate-fade-in">
                    <div class="text-center mb-4 sm:mb-6">
                        <h2 class="text-2xl sm:text-4xl md:text-5xl font-bold text-white drop-shadow-lg" id="cityName"></h2>
                        <p class="text-white/80 text-sm sm:text-lg mt-2 capitalize" id="weatherDesc"></p>
                        <p class="text-white/60 text-xs sm:text-sm mt-1" id="lastUpdated"></p>
                    </div>

                    <div class="flex flex-col md:flex-row items-center justify-between gap-4 sm:gap-8">
                        <!-- Temperature Section -->
                        <div class="flex flex-col items-center md:items-start flex-1">
                            <div class="mb-3 sm:mb-4 animate-bounce-slow" id="weatherIcon"></div>
                            <div class="text-5xl sm:text-7xl md:text-8xl font-bold text-white drop-shadow-2xl" id="temperature"></div>
                            <p class="text-white/90 text-base sm:text-xl mt-2" id="feelsLike"></p>
                        </div>

                        <!-- Weather Stats -->
                        <div class="grid grid-cols-2 gap-2 sm:gap-4 flex-1 w-full md:w-auto">
                            <div class="glass-effect rounded-xl p-2 sm:p-4 text-center hover:bg-white/20 transition-all">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white/80 mx-auto mb-1 sm:mb-2">
                                    <path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"></path>
                                </svg>
                                <p class="text-white/70 text-xs">Humidity</p>
                                <p class="text-white text-lg sm:text-2xl font-bold" id="humidity"></p>
                            </div>
                            <div class="glass-effect rounded-xl p-2 sm:p-4 text-center hover:bg-white/20 transition-all">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white/80 mx-auto mb-1 sm:mb-2">
                                    <path d="M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2"></path>
                                    <path d="M9.6 4.6A2 2 0 1 1 11 8H2"></path>
                                </svg>
                                <p class="text-white/70 text-xs">Wind</p>
                                <p class="text-white text-lg sm:text-2xl font-bold" id="windSpeed"></p>
                            </div>
                            <div class="glass-effect rounded-xl p-2 sm:p-4 text-center hover:bg-white/20 transition-all">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white/80 mx-auto mb-1 sm:mb-2">
                                    <path d="m12 14 4-4"></path>
                                    <path d="M3.34 19a10 10 0 1 1 17.32 0"></path>
                                </svg>
                                <p class="text-white/70 text-xs">Pressure</p>
                                <p class="text-white text-lg sm:text-2xl font-bold" id="pressure"></p>
                            </div>
                            <div class="glass-effect rounded-xl p-2 sm:p-4 text-center hover:bg-white/20 transition-all">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white/80 mx-auto mb-1 sm:mb-2">
                                    <path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"></path>
                                    <circle cx="12" cy="12" r="3"></circle>
                                </svg>
                                <p class="text-white/70 text-xs">Visibility</p>
                                <p class="text-white text-lg sm:text-2xl font-bold" id="visibility"></p>
                            </div>
                        </div>
                    </div>

                    <!-- Min/Max Temperature -->
                    <div class="flex justify-center gap-4 sm:gap-8 mt-4 sm:mt-6">
                        <div class="text-center">
                            <p class="text-white/70 text-xs sm:text-sm">‚Üì Low</p>
                            <p class="text-white text-lg sm:text-xl font-bold" id="minTemp"></p>
                        </div>
                        <div class="text-center">
                            <p class="text-white/70 text-xs sm:text-sm">‚Üë High</p>
                            <p class="text-white text-lg sm:text-xl font-bold" id="maxTemp"></p>
                        </div>
                    </div>
                </div>

                <!-- 5-Day Forecast -->
                <div class="glass-effect rounded-3xl p-4 sm:p-6 shadow-2xl animate-fade-in">
                    <h3 class="text-xl sm:text-2xl font-bold text-white mb-3 sm:mb-4 text-center">5-Day Forecast</h3>
                    <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-2 sm:gap-4" id="forecastContainer"></div>
                </div>
            </div>

            <!-- Footer -->
            <div class="text-center mt-6 sm:mt-8 animate-fade-in">
                <p class="text-white text-sm sm:text-lg drop-shadow-lg">
                    Built with ‚ù§Ô∏è by Anmol Bahuguna
                </p>
            </div>
        </div>
    </div>

    <script>
        const WEATHER_API_KEY = '2bb8fd198b8eee2fdcf4be5fdb587314';

        const cityInput = document.getElementById('cityInput');
        const searchBtn = document.getElementById('searchBtn');
        const currentLocationBtn = document.getElementById('currentLocationBtn');
        const loading = document.getElementById('loading');
        const error = document.getElementById('error');
        const weatherDisplay = document.getElementById('weatherDisplay');
        const mainBody = document.getElementById('mainBody');

        const weatherBackgrounds = {
            Clear: 'from-yellow-400 via-orange-400 to-pink-500',
            Clouds: 'from-gray-400 via-gray-500 to-gray-600',
            Rain: 'from-blue-700 via-blue-800 to-gray-900',
            Drizzle: 'from-blue-500 via-blue-600 to-blue-700',
            Thunderstorm: 'from-purple-900 via-gray-900 to-black',
            Snow: 'from-blue-100 via-blue-200 to-blue-300',
            Mist: 'from-gray-300 via-gray-400 to-gray-500',
            Haze: 'from-orange-200 via-yellow-200 to-gray-300',
            Fog: 'from-gray-400 via-gray-500 to-gray-600'
        };

        const getWeatherIcon = (main, size = '96') => {
            const icons = {
                Clear: `<svg xmlns="http://www.w3.org/2000/svg" width="${size}" height="${size}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-yellow-300 drop-shadow-lg"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg>`,
                Clouds: `<svg xmlns="http://www.w3.org/2000/svg" width="${size}" height="${size}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-300 drop-shadow-lg"><path d="M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z"></path></svg>`,
                Rain: `<svg xmlns="http://www.w3.org/2000/svg" width="${size}" height="${size}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-blue-300 drop-shadow-lg"><path d="M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"></path><path d="M16 14v6"></path><path d="M8 14v6"></path><path d="M12 16v6"></path></svg>`,
                Drizzle: `<svg xmlns="http://www.w3.org/2000/svg" width="${size}" height="${size}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-blue-300 drop-shadow-lg"><path d="M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"></path><path d="M8 19v1"></path><path d="M8 14v1"></path></svg>`,
                Thunderstorm: `<svg xmlns="http://www.w3.org/2000/svg" width="${size}" height="${size}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-yellow-300 drop-shadow-lg"><path d="M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973"></path><path d="m13 12-3 5h4l-3 5"></path></svg>`,
                Snow: `<svg xmlns="http://www.w3.org/2000/svg" width="${size}" height="${size}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-blue-100 drop-shadow-lg"><path d="M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"></path><path d="M8 15h.01"></path><path d="M8 19h.01"></path><path d="M12 17h.01"></path></svg>`
            };
            return icons[main] || icons.Clouds;
        };

        const createParticles = () => {
            const particlesContainer = document.getElementById('particles');
            particlesContainer.innerHTML = '';
            const particleCount = window.innerWidth < 768 ? 8 : 15;
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'absolute rounded-full bg-white opacity-10 animate-pulse';
                const size = Math.random() * 80 + 40;
                particle.style.width = size + 'px';
                particle.style.height = size + 'px';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 5 + 's';
                particle.style.animationDuration = Math.random() * 10 + 10 + 's';
                particlesContainer.appendChild(particle);
            }
        };

        const fetchWeatherByCoords = async (lat, lon) => {
            loading.classList.remove('hidden');
            error.classList.add('hidden');
            weatherDisplay.classList.add('hidden');

            try {
                const [currentResponse, forecastResponse] = await Promise.all([
                    fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${'2bb8fd198b8eee2fdcf4be5fdb587314'}&units=metric`),
                    fetch(`https://api.openweathermap.org/data/2.5/forecast?lat=${lat}&lon=${lon}&appid=${'2bb8fd198b8eee2fdcf4be5fdb587314'}&units=metric`)
                ]);

                if (!currentResponse.ok || !forecastResponse.ok) {
                    throw new Error('Failed to fetch weather data');
                }

                const currentData = await currentResponse.json();
                const forecastData = await forecastResponse.json();
                displayWeather(currentData, forecastData);
            } catch (err) {
                showError(err.message);
            } finally {
                loading.classList.add('hidden');
            }
        };

        const fetchWeather = async (cityName) => {
            if (!cityName.trim()) {
                showError('Please enter a city name');
                return;
            }

            loading.classList.remove('hidden');
            error.classList.add('hidden');
            weatherDisplay.classList.add('hidden');

            try {
                const [currentResponse, forecastResponse] = await Promise.all([
                    fetch(`https://api.openweathermap.org/data/2.5/weather?q=${cityName}&appid=${WEATHER_API_KEY}&units=metric`),
                    fetch(`https://api.openweathermap.org/data/2.5/forecast?q=${cityName}&appid=${WEATHER_API_KEY}&units=metric`)
                ]);

                if (!currentResponse.ok) {
                    if (currentResponse.status === 404) {
                        throw new Error('City not found. Please check spelling and try again.');
                    }
                    throw new Error('Failed to fetch weather data');
                }

                const currentData = await currentResponse.json();
                const forecastData = await forecastResponse.json();
                displayWeather(currentData, forecastData);
            } catch (err) {
                showError(err.message);
            } finally {
                loading.classList.add('hidden');
            }
        };

        const displayWeather = (current, forecast) => {
            // Current Weather
            document.getElementById('cityName').textContent = `${current.name}, ${current.sys.country}`;
            document.getElementById('weatherDesc').textContent = current.weather[0].description;
            document.getElementById('lastUpdated').textContent = `Updated: ${new Date().toLocaleTimeString()}`;
            document.getElementById('weatherIcon').innerHTML = getWeatherIcon(current.weather[0].main);
            document.getElementById('temperature').textContent = `${Math.round(current.main.temp)}¬∞`;
            document.getElementById('feelsLike').textContent = `Feels like ${Math.round(current.main.feels_like)}¬∞C`;
            document.getElementById('humidity').textContent = `${current.main.humidity}%`;
            document.getElementById('windSpeed').textContent = `${current.wind.speed} m/s`;
            document.getElementById('pressure').textContent = `${current.main.pressure} hPa`;
            document.getElementById('visibility').textContent = `${(current.visibility / 1000).toFixed(1)} km`;
            document.getElementById('minTemp').textContent = `${Math.round(current.main.temp_min)}¬∞C`;
            document.getElementById('maxTemp').textContent = `${Math.round(current.main.temp_max)}¬∞C`;

            // Background
            const bgClass = weatherBackgrounds[current.weather[0].main] || 'from-blue-400 via-blue-500 to-blue-600';
            mainBody.className = `bg-gradient-to-br ${bgClass} bg-transition min-h-screen`;

            // 5-Day Forecast
            const forecastContainer = document.getElementById('forecastContainer');
            forecastContainer.innerHTML = '';
            
            const dailyForecasts = {};
            forecast.list.forEach(item => {
                const date = new Date(item.dt * 1000);
                const day = date.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' });
                
                if (!dailyForecasts[day]) {
                    dailyForecasts[day] = {
                        temp: item.main.temp,
                        weather: item.weather[0].main,
                        desc: item.weather[0].description,
                        date: date
                    };
                }
            });

            const days = Object.keys(dailyForecasts).slice(0, 5);
            days.forEach((day, index) => {
                const data = dailyForecasts[day];
                const card = document.createElement('div');
                card.className = 'forecast-card glass-effect rounded-2xl p-3 sm:p-4 text-center';
                card.style.animationDelay = `${index * 0.1}s`;
                card.innerHTML = `
                    <p class="text-white font-semibold text-xs sm:text-sm mb-2">${day}</p>
                    <div class="mb-2">${getWeatherIcon(data.weather, '48')}</div>
                    <p class="text-white text-lg sm:text-2xl font-bold">${Math.round(data.temp)}¬∞</p>
                    <p class="text-white/70 text-xs capitalize mt-1">${data.desc}</p>
                `;
                forecastContainer.appendChild(card);
            });

            weatherDisplay.classList.remove('hidden');
        };

        const showError = (message) => {
            document.getElementById('errorMsg').textContent = message;
            error.classList.remove('hidden');
            weatherDisplay.classList.add('hidden');
        };

        const getCurrentLocation = () => {
            if (!navigator.geolocation) {
                showError('Geolocation not supported by your browser');
                return;
            }

            loading.classList.remove('hidden');
            error.classList.add('hidden');

            navigator.geolocation.getCurrentPosition(
                (position) => {
                    fetchWeatherByCoords(position.coords.latitude, position.coords.longitude);
                },
                () => {
                    loading.classList.add('hidden');
                    showError('Unable to retrieve location. Please enter a city manually.');
                }
            );
        };

        // Event Listeners
        searchBtn.addEventListener('click', () => fetchWeather(cityInput.value));
        cityInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') fetchWeather(cityInput.value);
        });
        currentLocationBtn.addEventListener('click', getCurrentLocation);

        // City suggestions
        document.querySelectorAll('.city-suggestion').forEach(btn => {
            btn.addEventListener('click', () => {
                const city = btn.getAttribute('data-city');
                cityInput.value = city;
                fetchWeather(city);
            });
        });

        // Initialize
        createParticles();
        window.addEventListener('resize', createParticles);

        // Add spin animation
        const style = document.createElement('style');
        style.textContent = '@keyframes spin { to { transform: rotate(360deg); } }';
        document.head.appendChild(style);
    </script>
</body>
</html>